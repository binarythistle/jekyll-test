{"swagger":"2.0","info":{"title":"Marketplacer Mobile API","contact":{"name":"Marketplacer API Team","url":"https://github.com/marketplacer/mobile-api/issues","email":"it@marketplacer.com"},"version":"1.0"},"basePath":"/api/mobile","consumes":["application/json"],"produces":["application/json"],"paths":{"/adverts":{"get":{"summary":"Retrieves collection of adverts associated with logged in user","parameters":[{"name":"page_size","type":"number","format":"integer","required":false,"in":"query","description":"results to show per page (default: 100)"},{"name":"page_number","type":"number","format":"integer","required":false,"in":"query","description":"page number"}],"responses":{"200":{"description":"Retrieves collection of adverts (if any)."},"401":{"description":"Not logged in"}}}},"/adverts/{advert_id}":{"get":{"summary":"Retrieves details for a selected advert published by the currently logged in user.","parameters":[{"name":"advert_id","type":"number","format":"integer","required":true,"in":"path"}],"responses":{"200":{"description":"Retrieves selected advert's details"},"401":{"description":"Not logged in"},"404":{"description":"Advert not found"}}}},"/adverts/{advert_id}/upgrade_to_featured":{"put":{"summary":"Update specified user advert to featured and add item to unpaid billings","parameters":[{"name":"advert_id","type":"number","format":"integer","required":true,"in":"path"},{"name":"featured","type":"boolean","required":true,"in":"query"}],"responses":{"200":{"description":"Advert updated"},"401":{"description":"Not logged in"},"404":{"description":"Advert not found"}}}},"/billings":{"get":{"summary":"Return array available billing items for current user","responses":{"200":{"description":"Returns array of available billing items"},"401":{"description":"Not logged in"}}}},"/billings/pay_all_unpaid":{"post":{"summary":"Pay all unpaid billing items for logged in user, and mark corresponding adverts as published.","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"JSON body containing total, billing_ids, and payment_method_nonce.","required":true,"schema":{"required":["total"],"properties":{"payment_method_nonce":{"type":"string","description":"Braintree payment method nonce."},"total":{"type":"number","format":"float","description":"Total to be charged."},"billing_ids":{"type":"array","items":{"type":"number","format":"int32"},"description":"IDs of the billings to charge."}}}}],"responses":{"200":{"description":"All billing items paid successfully"},"401":{"description":"Not logged in"},"422":{"description":"Payment error"}}}},"/billings/publish_free_adverts":{"post":{"summary":"Mark all $0 billings as paid and publish corresponding adverts.","consumes":["application/json"],"responses":{"200":{"description":"All free adverts published"},"401":{"description":"Not logged in"}}}},"/blogs":{"get":{"summary":"Return a list of all active blogs, ones falling under specific categories OR ones matching keyword query searches.\n          (NOTE: cannot use both query and category searches at the same time, will default to keyword if both parameters present.)","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"json body containing blog/filter parameters","required":false,"schema":{"required":[""],"properties":{"query":{"type":"string","description":"query for keyword based searches"},"sort_by":{"type":"string","description":"sorts results by published date, accepts either `newest` or `oldest`"},"slug":{"type":"string","description":"category slug for category based searches"},"page":{"type":"number","format":"integer","description":"page number"},"per_page":{"type":"number","format":"integer","description":"blog items per page"}}}}],"responses":{"200":{"description":"Returns list of blogs along with all available categories, current page number and total pages."},"404":{"description":"Results/page number not found."}}}},"/brands":{"get":{"summary":"Return a sorted list of all brands.","consumes":["application/json"],"responses":{"200":{"description":"Return all brands."}}}},"/cart":{"put":{"summary":"Update order details/add coupon to order","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"JSON body containing variant details","required":true,"schema":{"required":[""],"properties":{"coupon_code":{"type":"string"},"state":{"type":"string"},"billing_state":{"type":"string"},"country":{"type":"string"},"billing_country":{"type":"string"},"address":{"type":"string"},"billing_address":{"type":"string"},"company_name":{"type":"string"},"billing_company_name":{"type":"string"},"city":{"type":"string"},"billing_city":{"type":"string"},"region":{"type":"string"},"email_address":{"type":"string"},"billing_email_address":{"type":"string"},"first_name":{"type":"string"},"billing_first_name":{"type":"string"},"surname":{"type":"string"},"billing_surname":{"type":"string"},"phone":{"type":"string"},"billing_phone":{"type":"string"},"postcode":{"type":"string"},"billing_postcode":{"type":"string"},"message_to_seller":{"type":"string"},"gift_card_code":{"type":"string"},"gift_card_pin":{"type":"string"},"payment_method":{"type":"string"},"identity_document_type":{"type":"string"},"identity_document_number":{"type":"string"},"purchase_order_number":{"type":"string"},"billing_business_registration_code":{"type":"string"},"date_of_birth":{"type":"string"},"expected_delivery_date":{"type":"string"},"expected_delivery_slot_id":{"type":"string"}}}}],"responses":{"200":{"description":"Order details updated successfully, returns order with updated details."},"404":{"description":"Order/coupon not found."}}},"get":{"summary":"Get order details for current user/session.","responses":{"200":{"description":"Order found for current user/session."},"404":{"description":"Order not found for current user/session."}}}},"/cart/finalize":{"put":{"summary":"Finalise cart and process payment.","consumes":["application/json"],"parameters":[{"name":"total","type":"number","format":"float","required":true,"in":"query","description":"Order total."},{"name":"payment_method_nonce","type":"string","required":true,"in":"query","description":"Payment method nonce returned by Braintree drop-in."},{"name":"device_id","type":"string","required":false,"in":"query","description":"Used for keeping track of anonymous orders."},{"name":"save_order_details_to_user","type":"string","required":false,"in":"query","description":"If set, saves order name, address \u0026 email as default user details."}],"responses":{"200":{"description":"Payment processed successfully."},"422":{"description":"Unable to process order, refer to error message."}}}},"/catalogue/categories":{"get":{"summary":"Lists top level categories and immediate sub-categories","responses":{"200":{"description":"Top level categories \u0026 immediate sub-categories"}}}},"/catalogue/category/{taxon_slug}":{"get":{"summary":"Lists a top-level taxon, its sub-taxons, and expands one sub-taxon with adverts","parameters":[{"name":"taxon_slug","in":"path","required":true,"type":"string","description":"Top-level Taxon to show sub-taxons of"},{"name":"expand_slug","in":"query","type":"string","description":"Sub-taxon to show products of, defaults to first sub-taxon found"},{"name":"limit","in":"query","type":"integer","default":20,"description":"Number of products to show"}],"responses":{"200":{"description":"A top level taxon, its sub-taxons, and adverts for one sub-taxon"}}}},"/catalogue":{"get":{"summary":"Browse the store by category, filter, keyword and page","parameters":[{"name":"taxon_slug","in":"query","type":"string","description":"Only show adverts in this taxon and its children.\n\nIf the taxon supports searching on option values, option values \u0026 types will be\nincluded in the `facets` section of the response.\n"},{"name":"brand_slugs","in":"query","type":"array","collectionFormat":"csv","items":{"type":"string"},"description":"Only show adverts matching these brands"},{"name":"product_db_ids","in":"query","type":"array","collectionFormat":"csv","items":{"type":"string"},"description":"IDs of products to filter on."},{"name":"option_value_ids","in":"query","type":"array","collectionFormat":"csv","items":{"type":"integer"},"description":"IDs of option value ids to filter on.\n\nOption value ids that are part of the same option type are automatically OR'd with each other\n(eg show me Red or Black items, but only those that are Small)\n"},{"name":"availability","in":"query","type":"array","collectionFormat":"csv","items":{"type":"string"},"description":"Availabilities to filter on."},{"name":"query","in":"query","type":"string","description":"Only show adverts matching these keywords"},{"name":"page","in":"query","type":"integer","default":1,"description":"Page number to show"},{"name":"per_page","in":"query","type":"integer","default":10,"description":"Items per page"},{"name":"latitude","in":"query","type":"number","format":"float","description":"Show adverts near this location."},{"name":"longitude","in":"query","type":"number","format":"float","description":"Show adverts near this location."},{"name":"radius","in":"query","type":"number","format":"float","description":"Include adverts within {radius} KM of specified latitude/longitude"},{"name":"list","in":"query","type":"string","description":"Only show items in the the user's specified list. {device_id} must be supplied if this option is used"},{"name":"device_id","in":"query","type":"string","description":"Used with the {list} parameter"},{"name":"sort_by","in":"query","type":"string","description":"One of: latest cheapest most_expensive nearest sale default"},{"name":"genders","in":"query","type":"array","collectionFormat":"csv","items":{"type":"string"},"description":"One or many of: unisex male female"},{"name":"seller_id","in":"query","type":"string","description":"Only show items for seller with id {seller_id}"},{"name":"exclude_taxons","in":"query","type":"boolean","description":"Optionally exclude taxon list from results to speed up endpoint response"}],"responses":{"200":{"description":"Adverts matching the filter parameters and facet search options"}}}},"/catalogue/feed":{"get":{"summary":"Retrieve a user's product feed","description":"Omits any advert in the user's 'lists', identified by device_id \u0026 login session","responses":{"200":{"description":"Adverts for the user to add to wishlist, dislike or skip"}},"parameters":[{"name":"device_id","type":"string","required":true,"in":"query"}]}},"/catalogue/advert/{advert_id}":{"get":{"summary":"Retrieve advert with id {advert_id}.","parameters":[{"name":"advert_id","type":"integer","format":"int64","required":true,"in":"path","description":"Advert ID"}],"responses":{"200":{"description":"Advert details, including: variants, seller's other products, and general location."},"404":{"description":"Advert not found."}}}},"/catalogue/autocomplete/{keyword}":{"get":{"summary":"Retrieve list of search result pages matching a supplied keyword.","description":"Returns list of advert search result pages matching supplied keyword, along with their relevant page slugs, and the type of search filter being used (brand/category..etc.).","parameters":[{"name":"keyword","type":"string","required":true,"in":"path","description":"Search term"}],"responses":{"200":{"description":"List of search result pages matching keyword"}}}},"/categories":{"get":{"summary":"Return a sorted list of all categories that can be used for creating adverts.","consumes":["application/json"],"responses":{"200":{"description":"Return all categories."}}}},"/home":{"get":{"summary":"Retrieves a list of hero images/links and hot offers (adverts). Excludes disliked adverts for logged in users with a supplied device_id. NOTE: hero images and hot offers don't exist anymore, so this is deprecated and will always return empty lists","parameters":[{"name":"device_id","type":"string","required":false,"in":"query","description":"required for customising/excluding disliked adverts within hot offers"}],"responses":{"200":{"description":"Retrieves a list of hero images/links and hot offers (adverts)"}}}},"/cart/line_items":{"post":{"summary":"Add variant to cart.","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"JSON body containing variant details","required":true,"schema":{"required":["variant_id"],"properties":{"variant_id":{"type":"number","format":"integer"}}}}],"responses":{"200":{"description":"Variant with matching ID found. Returns relevant error message if unable to add to cart."},"422":{"description":"Unexpected result"},"404":{"description":"Variant with matching ID not found"}}}},"/cart/line_items/{line_item_id}":{"put":{"summary":"Update line item quantity/delivery type","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"JSON body containing line item details","required":true,"schema":{"required":[""],"properties":{"delivery_type":{"type":"string","description":"can be set to click_and_collect or buy_online (if option available for line item)"},"quantity":{"type":"number","format":"integer"}}}}],"responses":{"200":{"description":"Line item updated successfully."},"400":{"description":"Update failed, returns list of errors."}}},"delete":{"summary":"Removes line item from cart.","parameters":[{"name":"line_item_id","in":"formData","required":true,"type":"number","format":"integer"}],"responses":{"200":{"description":"Line item successfully removed."},"404":{"description":"Line item not found"}}}},"/catalogue/lists":{"get":{"summary":"Show all available lists","parameters":[{"name":"device_id","type":"string","required":true,"in":"query"}],"responses":{"200":{"description":"This user's lists \u0026 number of adverts in each list"}}}},"/catalogue/lists/{list_name}/{advert_id}":{"post":{"summary":"Add an advert to a list","parameters":[{"name":"device_id","type":"string","required":true,"in":"query"},{"name":"list_name","type":"string","required":true,"in":"path"},{"name":"advert_id","type":"integer","required":true,"in":"path"}],"responses":{"200":{"description":"Advert successfully added to list or already present in list"},"404":{"description":"Advert ID not found or no longer online"}}},"delete":{"summary":"Remove an advert from a list","parameters":[{"name":"device_id","type":"string","required":true,"in":"query"},{"name":"list_name","type":"string","required":true,"in":"path"},{"name":"advert_id","type":"integer","required":true,"in":"path"}],"responses":{"200":{"description":"Advert removed from list or not present in list"},"404":{"description":"Advert ID not found or no longer online"}}}},"/catalogue/lists/update_anonymous_wishlist":{"put":{"summary":"Bind any wishlist items for a device created by a logged out user to the current logged-in user","parameters":[{"name":"device_id","in":"formData","required":true,"type":"string"}],"responses":{"200":{"description":"Anonymous wishlists for device successfully updated."},"401":{"description":"Not currently logged in."}}}},"/orders":{"get":{"summary":"Retrieves currently logged-in user's orders","parameters":[{"name":"page","in":"query","type":"integer","default":1,"description":"Page number to show"},{"name":"per_page","in":"query","type":"integer","default":10,"description":"Items per page"},{"name":"sort_by","in":"query","type":"string","default":"created_at","description":"Field to sort the orders by"},{"name":"sort_dir","in":"query","type":"string","default":"asc","description":"Either 'asc' or 'desc'"}],"responses":{"200":{"description":"Returns all orders"},"401":{"description":"Not logged in"}}}},"/orders/update_anonymous_orders":{"put":{"summary":"Bind orders for a device, created by a logged out user to the current logged-in user","parameters":[{"name":"device_id","in":"formData","required":true,"type":"string"}],"responses":{"200":{"description":"Anonymous orders for device successfully updated."},"401":{"description":"Not currently logged in."}}}},"/sellers/{seller_id}":{"get":{"parameters":[{"name":"seller_id","in":"path","description":"ID of seller to fetch","required":true,"type":"integer","format":"int64"}],"summary":"Retrieves details about a seller by ID","responses":{"200":{"description":"Retrieves the seller details"},"404":{"description":"Unknown seller ID"}}}},"/sellers":{"get":{"summary":"Get a list of retailers matching {business_name} and/or within {distance} metres of location specified by {latitude} and {longitude}.","parameters":[{"name":"business_name","type":"string","required":true,"in":"path","description":"Search on business name. Need to supply at least business_name or ALL location params for this endpoint to work."},{"name":"latitude","type":"number","format":"float","required":true,"in":"path"},{"name":"longitude","type":"number","format":"float","required":true,"in":"path"},{"name":"distance","type":"number","format":"float","required":true,"description":"Distance in m.","in":"path"}],"responses":{"200":{"description":"Results returned"},"422":{"description":"Missing parameter(s)."}}}},"/sellers/{seller_id}/phone":{"get":{"summary":"Returns phone number for seller if available for advert. Triggers a conversion (i.e. Retailer will be charged for each time their details are shown to a customer).","parameters":[{"name":"seller_id","type":"string","required":true,"in":"path"},{"name":"advert_id","type":"string","required":false,"in":"query"},{"name":"device_id","type":"string","required":false,"in":"query","description":"Used to keep track of lead source."}],"responses":{"200":{"description":"Returns phone number for seller if available."}}}},"/sellers/{seller_id}/address":{"get":{"summary":"Returns the latitude and longitude for seller if available. Triggers a conversion (i.e. Retailer will be charged for each time their details are shown to a customer).","parameters":[{"name":"seller_id","type":"number","format":"integer","required":true,"in":"path"},{"name":"advert_id","type":"number","format":"integer","required":false,"in":"query"},{"name":"device_id","type":"string","required":false,"in":"query","description":"Used to keep track of lead source."}],"responses":{"200":{"description":"Returns address for seller if available for advert."}}}},"/sellers/{seller_id}/email_address":{"get":{"summary":"Returns email address for seller if available.","parameters":[{"name":"seller_id","type":"number","format":"integer","required":true,"in":"path"},{"name":"advert_id","type":"number","format":"integer","required":false,"in":"query"}],"responses":{"200":{"description":"Returns email address for seller if available"}}}},"/sellers/{seller_id}/email_seller":{"post":{"summary":"Sends email to the seller.","parameters":[{"name":"seller_id","type":"number","format":"integer","required":true,"in":"path"},{"name":"advert_id","type":"number","format":"integer","required":false,"in":"formData"},{"name":"first_name","type":"string","required":true,"in":"formData"},{"name":"email_address","type":"string","required":true,"in":"formData"},{"name":"message","type":"string","required":true,"in":"formData"},{"name":"postcode","type":"string","required":false,"in":"formData"},{"name":"phone","type":"string","required":false,"in":"formData"},{"name":"edm_enabled","type":"boolean","required":false,"in":"formData"},{"name":"device_id","type":"string","required":false,"in":"query","description":"Used to keep track of lead source."}],"responses":{"200":{"description":"Email sent/stored for vetting."},"404":{"description":"Advert/seller not found."},"422":{"description":"Missing/invalid params."}}}},"/user/password":{"post":{"summary":"Reset password for provided e-mail address.","consumes":["application/json"],"parameters":[{"name":"email_address","type":"string","required":true,"in":"query","description":"E-mail address of user account to reset password for."}],"responses":{"200":{"description":"Password reset instructions e-mailed."},"422":{"description":"Error processing request.  See errors."}}}},"/user/password/{password_reset_token}":{"put":{"summary":"Update user's password.","consumes":["application/json"],"parameters":[{"name":"password_reset_token","type":"string","required":true,"in":"path"},{"name":"password","type":"string","required":true,"in":"query"}],"responses":{"200":{"description":"Your password has been changed successfully"},"422":{"description":"Invalid password reset token, or invalid password."},"404":{"description":"Invalid password reset token."}}}},"/user/login":{"post":{"summary":"Create a new login session","parameters":[{"name":"username","in":"formData","required":true,"type":"string","description":"do not use if sending OAuth credentials"},{"name":"password","in":"formData","required":true,"type":"string","format":"password","description":"do not use if sending OAuth credentials"},{"name":"oauth_uid","in":"formData","required":true,"type":"string"},{"name":"oauth_provider","in":"formData","required":true,"type":"string"},{"name":"oauth_token","in":"formData","required":true,"type":"string","description":"OAuth/access token returned by OAuth provider"}],"responses":{"200":{"description":"Log in successful. Sets a session cookie to be used for subsequent API requests."},"401":{"description":"Log in unsuccessful"}}}},"/user/logout":{"delete":{"summary":"Logout user from current session","responses":{"200":{"description":"User details cleared from session"}}}},"/user":{"get":{"summary":"Retrieve account details for the currently logged-in user","responses":{"200":{"description":"Retrieves the account details"},"401":{"description":"Not currently logged in"}}},"put":{"summary":"Update logged in user's account details","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"json body containing updated user detail(s)","required":true,"schema":{"required":[""],"properties":{"first_name":{"type":"string"},"surname":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"state":{"description":"State code [VIC, NSW, QLD, WA, ACT, NT, SA, TAS]","type":"string"},"postcode":{"type":"string"},"mobile":{"type":"string"},"phone":{"type":"string"},"subaddress":{"type":"string"},"email_address":{"type":"string","format":"email"},"current_password":{"type":"string"},"password":{"type":"string","description":"New password for current user. Need to supply current_password as well to use this parameter."},"username":{"type":"string"},"title":{"type":"string","description":"Deprecated, always an empty string"},"edm_enabled":{"type":"boolean","description":"enable marketing emails"}}}}],"responses":{"200":{"description":"Details successfully updated."},"401":{"description":"Not currently logged in."},"422":{"description":"Invalid parameter value(s)/format."}}},"post":{"summary":"Create a new standard/oauth user account (do not provide both standard and OAuth params. ref required params for each type of login) .","consumes":["application/json"],"parameters":[{"name":"bodyParameters","in":"body","description":"json body containing user detail","required":true,"schema":{"required":["[\"username\", \"password\"]","[\"oauth_uid\", \"oauth_provider\", \"oauth_token\"]","email_address"],"properties":{"first_name":{"type":"string"},"surname":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"state":{"description":"State code [VIC, NSW, QLD, WA, ACT, NT, SA, TAS]","type":"string"},"postcode":{"type":"string"},"mobile":{"type":"string"},"phone":{"type":"string"},"subaddress":{"type":"string"},"email_address":{"type":"string","format":"email"},"password":{"type":"string"},"username":{"type":"string"},"edm_enabled":{"type":"boolean","description":"enable marketing emails"},"oauth_uid":{"type":"string"},"oauth_provider":{"type":"string"},"oauth_token":{"type":"string","description":"OAuth/access token returned by OAuth provider"}}}}],"responses":{"200":{"description":"Account successfully created. Sets a session cookie to be used for subsequent API requests."},"422":{"description":"Missing/Invalid parameter value(s)/format."}}}},"/user/client_token":{"get":{"summary":"Get client token for braintree integration.","consumes":["application/json"],"responses":{"200":{"description":"Client token generated."},"401":{"description":"Unauthorised."},"422":{"description":"Unable to generate client token."}}}}}}